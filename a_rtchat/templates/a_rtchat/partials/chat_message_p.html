<div class="{% if message.author == request.user %}ml-auto bg-blue-600{% else %}mr-auto bg-gray-700{% endif %} 
            text-white p-3 rounded-lg max-w-md shadow-lg
            animate-fadeInUp"
     id="message-{{ message.id }}"
     style="animation-duration: 0.4s;">
    <div class="flex items-center gap-2 mb-1">
        <img src="{{ message.author.profile.avatar }}" 
             class="w-6 h-6 rounded-full object-cover transform transition-transform hover:scale-110"
             onerror="this.src='https://ui-avatars.com/api/?name={{ message.author.username }}&background=random'" />
        <strong class="text-sm">{{ message.author.username }}</strong>
        <span class="text-xs text-gray-300 ml-auto">{{ message.created|timesince }} ago</span>
    </div>
    <p class="break-words">{{ message.body }}</p>
</div>